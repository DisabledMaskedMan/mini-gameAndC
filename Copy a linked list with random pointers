 struct Node 
{
	 int val;
     struct Node *next;
     struct Node *random;
};


 struct Node* copyRandomList(struct Node* head) {
	 if (!head)
		 return NULL;
	 struct Node* cur = head;
	 struct Node* copy = NULL;
	 while (cur)
	 {
		 copy = (struct Node*)malloc(sizeof(struct Node));
		 copy->val = cur->val;
		 copy->next = cur->next;
		 cur->next = copy;
		 cur = copy->next;
	 }
	 cur = head;
	 while (cur)
	 {
		 if (cur->random == NULL)
			 cur->next->random = NULL;
		 else
			 cur->next->random = cur->random->next;
		 cur = cur->next->next;
	 }
	 struct Node* Ntail = NULL;
	 struct Node* Nhead = NULL;
	 cur = head;
	 while (cur)
	 {
		 copy = cur->next;
		 if (Nhead == NULL)
			 Nhead = Ntail = copy;
		 else
		 {
			 Ntail->next = copy;
			 Ntail = copy;
		 }
		 cur->next = cur->next->next;
		 cur = cur->next;
	 }
	 return Nhead;
 }
