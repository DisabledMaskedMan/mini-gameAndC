C51 COMPILER V9.54   MAIN                                                                  04/14/2023 22:50:07 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\51one-chip computer\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include <delay.h>
   3          #include <timer0.h>
   4          
   5          sbit ENA = P0^0;
   6          sbit IN1 = P0^1;
   7          sbit IN2 = P0^2;
   8          sbit IN3 = P0^3;
   9          sbit IN4 = P0^4;
  10          sbit ENB = P0^5;
  11          sbit ENA2 = P1^0;
  12          sbit IN12 = P1^1;
  13          sbit IN22 = P1^2;
  14          sbit IN32 = P1^3;
  15          sbit IN42 = P1^4;
  16          sbit ENB2 = P1^5;
  17          sbit AOB = P0^6;
  18          
  19          unsigned char time;
  20          
  21          void main()
  22          {
  23   1              Timer0_Init();
  24   1              ENA = 1;
  25   1              ENA2 = 1;
  26   1              
  27   1              IN1 = 0;
  28   1              IN12 = 0;
  29   1              IN2 = 1;
  30   1              IN22 = 1;
  31   1              
  32   1              ENB = 1;
  33   1              ENB2 = 1;
  34   1              
  35   1              IN3 = 0;
  36   1              IN32 = 0;
  37   1              IN4 = 1;
  38   1              IN42 = 1;
  39   1              
  40   1              
  41   1              //delay(2000);
  42   1              
  43   1              while(1)
  44   1              {
  45   2                      if(AOB == 0)
  46   2                      {
  47   3                              //停下，左转
  48   3                              ENA = 0;
  49   3                              ENA2 = 0;
  50   3                              ENB = 0;
  51   3                              ENB2 = 0;
  52   3                              delay(250);
  53   3                                              
  54   3                              IN3 = 1;
C51 COMPILER V9.54   MAIN                                                                  04/14/2023 22:50:07 PAGE 2   

  55   3                              IN32 = 1;
  56   3                              IN4 = 0;
  57   3                              IN42 = 0;       
  58   3                              time = 0;
  59   3                              delay(750);
  60   3                              
  61   3                              //停下，直行       
  62   3                              ENA = 0;
  63   3                              ENA2 = 0;
  64   3                              ENB = 0;
  65   3                              ENB2 = 0;
  66   3                              delay(250);                     
  67   3                              
  68   3                              IN1 = 0;
  69   3                              IN12 = 0;
  70   3                              IN2 = 1;
  71   3                              IN22 = 1;
  72   3                              IN3 = 0;
  73   3                              IN32 = 0;
  74   3                              IN4 = 1;
  75   3                              IN42 = 1;
  76   3                              delay(500);
  77   3                              
  78   3                              //停下，右转
  79   3                              ENA = 0;
  80   3                              ENA2 = 0;
  81   3                              ENB = 0;
  82   3                              ENB2 = 0;
  83   3                              delay(450);
  84   3                              
  85   3                              IN1 = 1;
  86   3                              IN12 = 1;       
  87   3                              IN2 = 0;
  88   3                              IN22 = 0;
  89   3                              
  90   3                              IN3 = 0;
  91   3                              IN32 = 0;
  92   3                              IN4 = 1;
  93   3                              IN42 = 1;
  94   3                              time = 0;
  95   3                              delay(900);
  96   3                                      
  97   3                              //停下，直行       
  98   3                              ENA = 0;
  99   3                              ENA2 = 0;
 100   3                              ENB = 0;
 101   3                              ENB2 = 0;
 102   3                              delay(250);     
 103   3                              
 104   3                              IN1 = 0;
 105   3                              IN12 = 0;
 106   3                              IN2 = 1;
 107   3                              IN22 = 1;
 108   3                              IN3 = 0;        
 109   3                              IN32 = 0;
 110   3                              IN4 = 1;
 111   3                              IN42 = 1;
 112   3                              delay(1150);
 113   3                              
 114   3                              //停下，左转
 115   3                              ENA = 0;
 116   3                              ENA2 = 0;
C51 COMPILER V9.54   MAIN                                                                  04/14/2023 22:50:07 PAGE 3   

 117   3                              ENB = 0;
 118   3                              ENB2 = 0;
 119   3                              delay(250);
 120   3                              
 121   3                              IN3 = 1;
 122   3                              IN32 = 1;
 123   3                              IN4 = 0;
 124   3                              IN42 = 0;
 125   3                              time = 0;
 126   3                              delay(500);
 127   3                              
 128   3                              //停下，直行       
 129   3                              ENA = 0;
 130   3                              ENA2 = 0;
 131   3                              ENB = 0;
 132   3                              ENB2 = 0;
 133   3                              delay(350);     
 134   3                              
 135   3                              IN1 = 0;
 136   3                              IN12 = 0;
 137   3                              IN2 = 1;        
 138   3                              IN22 = 1;
 139   3                              IN3 = 0;
 140   3                              IN32 = 0;
 141   3                              IN4 = 1;
 142   3                              IN42 = 1;
 143   3                      }
 144   2              }
 145   1      }
 146          
 147          void Timer0_Rountine() interrupt 1
 148          {
 149   1              static unsigned int count;
 150   1              TL0 = 0xD7;
 151   1              TH0 = 0xFD;
 152   1              count++;
 153   1              if(count == 100)
 154   1              {
 155   2                      count = 0;
 156   2                      time++;
 157   2                      if(time > 25)
 158   2                              time = 25;
 159   2              }
 160   1              if(count >= time)
 161   1              {
 162   2                      ENA = 0;
 163   2                      ENA2 = 0;
 164   2                      ENB = 0;
 165   2                      ENB2 = 0;
 166   2              }
 167   1              if(count < time)
 168   1              {
 169   2                      ENA = 1;
 170   2                      ENA2 = 1;
 171   2                      ENB = 1;
 172   2                      ENB2 = 1;
 173   2              }
 174   1              
 175   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.54   MAIN                                                                  04/14/2023 22:50:07 PAGE 4   

   CODE SIZE        =    341    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
